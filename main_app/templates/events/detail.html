{% load static %}

<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="{% static 'css/event_details.css' %}">
  <title>Event Details</title>
  <style>
    body {
      background-color: #222;
      color: #fff;
      font-family: 'Montserrat', sans-serif;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: black;
      opacity: 0.2;
      z-index: -1;
    }
  </style>
</head>
<body>
  <div class="overlay"></div>
  <div id="video-overlay">
    <video id="video-background" data-videos='{% static "formdetailsvideo/video1.mp4" %}, {% static "formdetailsvideo/video3.mp4" %}' autoplay loop muted></video>
  </div>
  <div class="card">
    <h1 class="card-title uppercase">{{ event.name }}</h1> <!-- Put the title inside the card div -->
    <div class="card-content">
      <p>Type: {{ event.type }}</p>
      <p>Description: {{ event.description }}</p>
      <p>Location: {{ event.location }}</p>
      <p>Time: {{ event.event_date_time|date:"F d, Y H:i A" }}</p>
      <p>Capacity: {{ event.capacity }}</p>
      <p>Restrictions: {{ event.restrictions }}</p>
      <p>Notes: {{ event.notes }}</p>
    </div>
    <div class="card-action">
      <a href="{% url 'events_update' event.id %}">Edit</a>
      <a href="{% url 'events_delete' event.id %}">Delete</a>
    </div>
  </div>
<script>
   window.addEventListener('DOMContentLoaded', function () {
    var videoElement = document.getElementById('video-background');
    var videoIndex = 0;
    var videos = videoElement.dataset.videos.split(', ');
    var timer = null;

    function loadNextVideo() {
        // If there's an existing timer, clear it
        if (timer) {
            clearTimeout(timer);
        }

        videoElement.src = videos[videoIndex].trim();
        videoElement.load();
        videoElement.playbackRate = 0.8; // Play video at 80% speed
        videoElement.play();
        videoIndex = (videoIndex + 1) % videos.length;

        // Set a timer to load the next video after 5 seconds
        timer = setTimeout(loadNextVideo, 6000);
    }

    loadNextVideo();
});

</script>
</body>
</html>